{"version":3,"file":"working-abort-test.js","names":["Sitemapper","testWorkingAbort","_testWorkingAbort","apply","arguments","_asyncToGenerator","console","log","preAbortController","AbortController","abort","sitemapper1","debug","fetch","signal","error","message","abortController2","sitemapper2","timeout","promise2","setTimeout","result","sites","length","sitemapper3","catch"],"sources":["../../src/examples/working-abort-test.js"],"sourcesContent":["import Sitemapper from '../assets/sitemapper.js';\n\nasync function testWorkingAbort() {\n  console.log('=== Working AbortController Test ===\\n');\n\n  // Test 1: Abort before starting\n  console.log('1. Testing pre-aborted signal:');\n  const preAbortController = new AbortController();\n  preAbortController.abort();\n  \n  try {\n    const sitemapper1 = new Sitemapper({ debug: false });\n    await sitemapper1.fetch('https://www.google.com/sitemap.xml', {\n      signal: preAbortController.signal\n    });\n    console.log('ERROR: Request should have been aborted');\n  } catch (error) {\n    console.log('✓ Correctly aborted before starting:', error.message);\n  }\n\n  console.log('\\n2. Testing abort during execution:');\n  \n  // Test 2: Use constructor with signal\n  const abortController2 = new AbortController();\n  const sitemapper2 = new Sitemapper({\n    signal: abortController2.signal,\n    debug: false,\n    timeout: 30000\n  });\n\n  // Start request\n  const promise2 = sitemapper2.fetch('https://www.google.com/sitemap.xml');\n  \n  // Abort very quickly (before any significant work is done)\n  setTimeout(() => {\n    console.log('Aborting request immediately...');\n    abortController2.abort();\n  }, 1);\n\n  try {\n    const result = await promise2;\n    console.log('Request completed unexpectedly with', result.sites.length, 'sites');\n  } catch (error) {\n    console.log('✓ Request was aborted during execution:', error.message);\n  }\n\n  console.log('\\n3. Testing successful completion:');\n  \n  // Test 3: Let a request complete normally\n  try {\n    const sitemapper3 = new Sitemapper({ debug: false });\n    const result = await sitemapper3.fetch('https://wp.seantburke.com/sitemap.xml');\n    console.log('✓ Request completed successfully with', result.sites.length, 'sites');\n  } catch (error) {\n    console.log('Request failed:', error.message);\n  }\n}\n\ntestWorkingAbort().catch(console.error);"],"mappings":"6XAAA,MAAO,CAAAA,UAAU,KAAM,yBAAyB,CAAC,QAElC,CAAAC,gBAAgBA,CAAA,SAAAC,iBAAA,CAAAC,KAAA,MAAAC,SAAA,WAAAF,kBAAA,SAAAA,iBAAA,CAAAG,iBAAA,CAA/B,WAAkC,CAChCC,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CAGrDD,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC7C,GAAM,CAAAC,CAAkB,CAAG,GAAI,CAAAC,eAAiB,CAChDD,CAAkB,CAACE,KAAK,CAAC,CAAC,CAE1B,GAAI,CACF,GAAM,CAAAC,CAAW,CAAG,GAAI,CAAAX,UAAU,CAAC,CAAEY,KAAK,GAAQ,CAAC,CAAC,CAAC,KAC/C,CAAAD,CAAW,CAACE,KAAK,CAAC,oCAAoC,CAAE,CAC5DC,MAAM,CAAEN,CAAkB,CAACM,MAC7B,CAAC,CAAC,CACFR,OAAO,CAACC,GAAG,CAAC,yCAAyC,CACvD,CAAE,MAAOQ,CAAK,CAAE,CACdT,OAAO,CAACC,GAAG,CAAC,2CAAsC,CAAEQ,CAAK,CAACC,OAAO,CACnE,CAEAV,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,IAG7C,CAAAU,CAAgB,CAAG,GAAI,CAAAR,eAAiB,CACxCS,CAAW,CAAG,GAAI,CAAAlB,UAAU,CAAC,CACjCc,MAAM,CAAEG,CAAgB,CAACH,MAAM,CAC/BF,KAAK,GAAO,CACZO,OAAO,CAAE,GACX,CAAC,CAAC,CAGIC,CAAQ,CAAGF,CAAW,CAACL,KAAK,CAAC,oCAAoC,CAAC,CAGxEQ,UAAU,CAAC,IAAM,CACff,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAC9CU,CAAgB,CAACP,KAAK,CAAC,CACzB,CAAC,CAAE,CAAC,CAAC,CAEL,GAAI,CACF,GAAM,CAAAY,CAAM,MAAS,CAAAF,CAAQ,CAC7Bd,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAEe,CAAM,CAACC,KAAK,CAACC,MAAM,CAAE,OAAO,CACjF,CAAE,MAAOT,CAAK,CAAE,CACdT,OAAO,CAACC,GAAG,CAAC,8CAAyC,CAAEQ,CAAK,CAACC,OAAO,CACtE,CAEAV,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAGlD,GAAI,IACI,CAAAkB,CAAW,CAAG,GAAI,CAAAzB,UAAU,CAAC,CAAEY,KAAK,GAAQ,CAAC,CAAC,CAC9CU,CAAM,MAAS,CAAAG,CAAW,CAACZ,KAAK,CAAC,uCAAuC,CAAC,CAC/EP,OAAO,CAACC,GAAG,CAAC,4CAAuC,CAAEe,CAAM,CAACC,KAAK,CAACC,MAAM,CAAE,OAAO,CACnF,CAAE,MAAOT,CAAK,CAAE,CACdT,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEQ,CAAK,CAACC,OAAO,CAC9C,CACF,CAAC,EAAAd,iBAAA,CAAAC,KAAA,MAAAC,SAAA,EAEDH,gBAAgB,CAAC,CAAC,CAACyB,KAAK,CAACpB,OAAO,CAACS,KAAK,CAAC","ignoreList":[]}